(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{swPA:function(e,t,n){"use strict";n.r(t),n.d(t,"couponsModule",(function(){return w}));var i=n("3Pt+"),r=n("ofXK"),o=n("tyNb"),b=n("fXoL");let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Eb({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(b.Nb(0,"div",0),b.Nb(1,"div",1),b.Lb(2,"router-outlet"),b.Mb(),b.Mb())},directives:[o.g],encapsulation:2}),e})();var c=n("SxV6"),a=n("J9tS");function u(e,t){1&e&&b.Lb(0,"span",9)}function d(e,t){1&e&&(b.Nb(0,"span"),b.hc(1,"Delete"),b.Mb())}function f(e,t){if(1&e){const e=b.Ob();b.Nb(0,"tr"),b.Nb(1,"td"),b.hc(2),b.Mb(),b.Nb(3,"td"),b.hc(4),b.Mb(),b.Nb(5,"td"),b.hc(6),b.Mb(),b.Nb(7,"td",6),b.Nb(8,"button",7),b.Vb("click",(function(){b.cc(e);const n=t.$implicit;return b.Xb().deleteCoupon(n.id)})),b.gc(9,u,1,0,"span",8),b.gc(10,d,2,0,"span",5),b.Mb(),b.Mb(),b.Mb()}if(2&e){const e=t.$implicit;b.zb(2),b.ic(e.name),b.zb(2),b.ic(e.percent_off),b.zb(2),b.ic(e.duration_in_months),b.zb(2),b.Yb("disabled",e.isDeleting),b.zb(1),b.Yb("ngIf",e.isDeleting),b.zb(1),b.Yb("ngIf",!e.isDeleting)}}function p(e,t){1&e&&(b.Nb(0,"tr"),b.Nb(1,"td",10),b.Lb(2,"span",11),b.Mb(),b.Mb())}function l(e,t){1&e&&(b.Nb(0,"h1"),b.hc(1,"Add Coupon"),b.Mb())}function h(e,t){1&e&&(b.Nb(0,"div"),b.hc(1,"Coupon Name is required"),b.Mb())}function m(e,t){if(1&e&&(b.Nb(0,"div",15),b.gc(1,h,2,0,"div",0),b.Mb()),2&e){const e=b.Xb();b.zb(1),b.Yb("ngIf",e.f.name.errors.required)}}function g(e,t){1&e&&(b.Nb(0,"div"),b.hc(1,"Off Percentage is required"),b.Mb())}function N(e,t){if(1&e&&(b.Nb(0,"div",15),b.gc(1,g,2,0,"div",0),b.Mb()),2&e){const e=b.Xb();b.zb(1),b.Yb("ngIf",e.f.offPercentage.errors.required)}}function v(e,t){1&e&&(b.Nb(0,"div"),b.hc(1,"Duration is required"),b.Mb())}function M(e,t){if(1&e&&(b.Nb(0,"div",15),b.gc(1,v,2,0,"div",0),b.Mb()),2&e){const e=b.Xb();b.zb(1),b.Yb("ngIf",e.f.duration.errors.required)}}function C(e,t){1&e&&b.Lb(0,"span",16)}const I=function(e){return{"is-invalid":e}},z=[{path:"",component:s,children:[{path:"",component:(()=>{class e{constructor(e){this.accountService=e,this.coupons=null}ngOnInit(){this.accountService.getAll().pipe(Object(c.a)()).subscribe(e=>this.coupons=e.data)}deleteCoupon(e){this.coupons.find(t=>t.id===e).isDeleting=!0,this.accountService.delete(e).pipe(Object(c.a)()).subscribe(()=>{this.coupons=this.coupons.filter(t=>t.id!==e)})}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(a.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["ng-component"]],decls:17,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-danger","btn-delete-coupon",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(b.Nb(0,"h1"),b.hc(1,"Manage Coupons"),b.Mb(),b.Nb(2,"a",0),b.hc(3,"Add Coupon"),b.Mb(),b.Nb(4,"table",1),b.Nb(5,"thead"),b.Nb(6,"tr"),b.Nb(7,"th",2),b.hc(8,"Name"),b.Mb(),b.Nb(9,"th",2),b.hc(10,"Percent off"),b.Mb(),b.Nb(11,"th",2),b.hc(12,"Duration"),b.Mb(),b.Lb(13,"th",3),b.Mb(),b.Mb(),b.Nb(14,"tbody"),b.gc(15,f,11,6,"tr",4),b.gc(16,p,3,0,"tr",5),b.Mb(),b.Mb()),2&e&&(b.zb(15),b.Yb("ngForOf",t.coupons),b.zb(1),b.Yb("ngIf",!t.coupons))},directives:[o.e,r.i,r.j],encapsulation:2}),e})()},{path:"add",component:(()=>{class e{constructor(e,t,n,i,r){this.formBuilder=e,this.route=t,this.router=n,this.accountService=i,this.alertService=r,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[i.i.minLength(6)];this.isAddMode&&e.push(i.i.required),this.form=this.formBuilder.group({name:["",i.i.required],offPercentage:["",i.i.required],duration:["",i.i.required]}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(c.a)()).subscribe(e=>{this.f.firstName.setValue(e.firstName),this.f.lastName.setValue(e.lastName),this.f.couponname.setValue(e.couponname)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode&&this.createCoupon())}createCoupon(){this.accountService.registerCoupon(this.form.value).pipe(Object(c.a)()).subscribe(e=>{this.alertService.success("Coupon added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(i.b),b.Kb(o.a),b.Kb(o.c),b.Kb(a.a),b.Kb(a.b))},e.\u0275cmp=b.Eb({type:e,selectors:[["ng-component"]],decls:25,vars:16,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","name"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","offPercentage"],["type","number","formControlName","offPercentage",1,"form-control",3,"ngClass"],["for","duration"],["type","number","formControlName","duration",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/coupons",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(b.gc(0,l,2,0,"h1",0),b.Nb(1,"form",1),b.Vb("ngSubmit",(function(){return t.onSubmit()})),b.Nb(2,"div",2),b.Nb(3,"div",3),b.Nb(4,"label",4),b.hc(5,"Name"),b.Mb(),b.Lb(6,"input",5),b.gc(7,m,2,1,"div",6),b.Mb(),b.Nb(8,"div",3),b.Nb(9,"label",7),b.hc(10,"Off Percentage"),b.Mb(),b.Lb(11,"input",8),b.gc(12,N,2,1,"div",6),b.Mb(),b.Mb(),b.Nb(13,"div",2),b.Nb(14,"div",3),b.Nb(15,"label",9),b.hc(16,"Duration"),b.Mb(),b.Lb(17,"input",10),b.gc(18,M,2,1,"div",6),b.Mb(),b.Mb(),b.Nb(19,"div",11),b.Nb(20,"button",12),b.gc(21,C,1,0,"span",13),b.hc(22," Save "),b.Mb(),b.Nb(23,"a",14),b.hc(24,"Cancel"),b.Mb(),b.Mb(),b.Mb()),2&e&&(b.Yb("ngIf",t.isAddMode),b.zb(1),b.Yb("formGroup",t.form),b.zb(5),b.Yb("ngClass",b.ac(10,I,t.submitted&&t.f.name.errors)),b.zb(1),b.Yb("ngIf",t.submitted&&t.f.name.errors),b.zb(4),b.Yb("ngClass",b.ac(12,I,t.submitted&&t.f.offPercentage.errors)),b.zb(1),b.Yb("ngIf",t.submitted&&t.f.offPercentage.errors),b.zb(5),b.Yb("ngClass",b.ac(14,I,t.submitted&&t.f.couponname.errors)),b.zb(1),b.Yb("ngIf",t.submitted&&t.f.duration.errors),b.zb(2),b.Yb("disabled",t.loading),b.zb(1),b.Yb("ngIf",t.loading))},directives:[r.j,i.j,i.f,i.d,i.a,i.e,i.c,r.h,i.g,o.e],encapsulation:2}),e})()}]}];let Y=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[o.f.forChild(z)],o.f]}),e})(),w=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[r.b,i.h,Y]]}),e})()}}]);